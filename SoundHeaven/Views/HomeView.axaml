<UserControl x:Class="SoundHeaven.Views.HomeView"
             xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="clr-namespace:SoundHeaven.ViewModels"
             xmlns:models="clr-namespace:SoundHeaven.Models"
             xmlns:converters="clr-namespace:SoundHeaven.Converters"
             xmlns:controls="clr-namespace:SoundHeaven.Controls"
             x:Name="Root"
             x:DataType="vm:HomeViewModel">

    <!-- Main Vertical ScrollViewer with ToolbarColor Background -->
    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  Theme="{StaticResource MaterialModernScrollViewer}" 
                  Background="{StaticResource ToolBarColor}">
        <StackPanel Margin="20">
            
            <!-- Recently Played Section -->
            <TextBlock HorizontalAlignment="Center"
                       Text="Top Tracks" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Margin="0,0,0,10"/>
            
            <!-- Horizontal ScrollViewer for Recently Played Albums -->
            <ScrollViewer Theme="{StaticResource MaterialModernScrollViewer}"
                          Background="Transparent"
                          Foreground="White"
                          HorizontalScrollBarVisibility="Auto" 
                          VerticalScrollBarVisibility="Disabled"
                          Margin="0,0,0,20"> <!-- Added bottom margin for spacing -->
                <ItemsControl ItemsSource="{Binding TopTracks}">
                    <!-- Horizontal StackPanel for Items -->
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    
                    <!-- DataTemplate for Each Song -->
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="models:Song">
                            <StackPanel Orientation="Vertical" 
                                        Margin="10" 
                                        Width="150"> <!-- Fixed width for consistency -->
                                
                                <!-- Rounded Album Artwork -->
                                <Border CornerRadius="15" 
                                        ClipToBounds="True"
                                        Background="Transparent">
                                    <controls:AsyncImageControl Width="150" 
                                                               Height="150" 
                                                               SourceUrl="{Binding ArtworkUrl}" 
                                                               Stretch="UniformToFill" />
                                </Border>
                                
                                <!-- Song Title -->
                                <TextBlock Text="{Binding Title}" 
                                           FontWeight="Bold" 
                                           TextAlignment="Center" 
                                           Margin="0,5,0,0"/>
                                
                                <!-- Artist Name -->
                                <TextBlock Text="{Binding Artist}" 
                                           Foreground="Gray" 
                                           TextAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            
            <!-- Recommended for You Section -->
            <TextBlock HorizontalAlignment="Center"
                       Text="Recently Played" 
                       FontSize="24" 
                       FontWeight="Bold" 
                       Margin="0,20,0,10"/>
            
            <!-- Horizontal ScrollViewer for Recommended Songs -->
            <ScrollViewer HorizontalScrollBarVisibility="Auto" 
                          VerticalScrollBarVisibility="Disabled"
                          Theme="{StaticResource MaterialModernScrollViewer}"
                          Background="Transparent"
                          Foreground="White">
                        
                <ItemsControl ItemsSource="{Binding RecentlyPlayedTracks}">
                    <!-- Horizontal StackPanel for Items -->
                    <ItemsControl.ItemsPanel>
                        <ItemsPanelTemplate>
                            <StackPanel Orientation="Horizontal"/>
                        </ItemsPanelTemplate>
                    </ItemsControl.ItemsPanel>
                    
                    <!-- DataTemplate for Each Recommended Song -->
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="models:Song">
                            <StackPanel Orientation="Vertical" 
                                        Margin="10" 
                                        Width="150"> <!-- Fixed width for consistency -->
                                
                                <!-- Rounded Album Artwork -->
                                <Border CornerRadius="15" 
                                        ClipToBounds="True"
                                        Background="Transparent">
                                    <controls:AsyncImageControl Width="150" 
                                                               Height="150" 
                                                               SourceUrl="{Binding ArtworkUrl}" 
                                                               Stretch="UniformToFill" />
                                </Border>
                                
                                <!-- Song Title -->
                                <TextBlock Text="{Binding Title}" 
                                           FontWeight="Bold" 
                                           TextAlignment="Center" 
                                           Margin="0,5,0,0"/>
                                
                                <!-- Artist Name -->
                                <TextBlock Text="{Binding Artist}" 
                                           Foreground="Gray" 
                                           TextAlignment="Center"/>
                            </StackPanel>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>
            </ScrollViewer>
            
        </StackPanel>
    </ScrollViewer>
    
</UserControl>
